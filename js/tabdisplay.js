TABDISPLAY = {
	  faviconsDefault:{
		/*  "favicon.cc":[
			  "http://www.favicon.cc/favicon/651/184/favicon.png"
			, "http://www.favicon.cc/favicon/637/184/favicon.png"
			, "http://www.favicon.cc/favicon/635/184/favicon.png"
			, "http://www.favicon.cc/favicon/173/164/favicon.png"
			, "http://www.favicon.cc/favicon/436/163/favicon.png"
			, "http://www.favicon.cc/favicon/375/146/favicon.png"
			, "http://www.favicon.cc/favicon/779/141/favicon.png"
			, "http://www.favicon.cc/favicon/627/133/favicon.png"
			, "http://www.favicon.cc/favicon/438/132/favicon.png"
			, "http://www.favicon.cc/favicon/836/114/favicon.png"
		]*/
		  "favicon.cc":[
			  "/favicons/faviconcc/651.184.favicon.png"
			, "/favicons/faviconcc/637.184.favicon.png"
			, "/favicons/faviconcc/635.184.favicon.png"
			, "/favicons/faviconcc/173.164.favicon.png"
			, "/favicons/faviconcc/436.163.favicon.png"
			, "/favicons/faviconcc/375.146.favicon.png"
			, "/favicons/faviconcc/779.141.favicon.png"
			, "/favicons/faviconcc/627.133.favicon.png"
			, "/favicons/faviconcc/438.132.favicon.png"
			, "/favicons/faviconcc/836.114.favicon.png"
		]
		/*, "chomperstomp.com":[
			  "http://www.chomperstomp.com/tabEdit/serena.png"
			, "http://www.chomperstomp.com/tabEdit/icon.png"
			, "http://www.chomperstomp.com/tabEdit/calcRed.gif"
			, "http://www.chomperstomp.com/tabEdit/calcGreen.gif"
			, "http://www.chomperstomp.com/tabEdit/calcPurple.gif"
			, "http://www.chomperstomp.com/tabEdit/calc16.gif"
		]*/
		, "chomperstomp.com":[
			  "/favicons/serena.png"
			, "/favicons/icon.png"
			, "/favicons/calcRed.gif"
			, "/favicons/calcGreen.gif"
			, "/favicons/calcPurple.gif"
			, "/favicons/calc16.gif"
		]
		/*, "google.com":[
			  "http://img9.imageshack.us/img9/7726/chromefavicon.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/alert-o16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/api-r16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/articles-g16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/assorted_ads-y16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/babyblock-b16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/books-g16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/bullet_1-b16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/bullet_2-b16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/bullet_3-b16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/bullet_4-b16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/bullet_5-b16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/bullet_6-b16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/bullet_7-b16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/bullet_8-b16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/bullet_9-b16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/bullet_10-b16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/business_tower-p16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/chart-o16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/chat-b16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/checkmark-r16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/clapper-b16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/clock-y16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/controlpanel-p16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/copyright-b16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/coupon_tag-r16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/crate-br16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/directions_api-16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/epicenter-r16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/filedownload-y16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/filing_cabinet_search-g16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/forward_voicemail-b16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/geocoding_api-16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/gift-o16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/globe-b16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/heart-r16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/help_forum-o16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/house-r16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/house_ad-b16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/info-g16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/interactive_media_ads-16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/key-y16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/laptop-b16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/lightbulb-y16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/localbusiness-y16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/mail-lb16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/mobile_phone-16.gif"
			, "http://www.chomperstomp.com/tabEdit/gIcons/money-16.gif"
			, "http://www.chomperstomp.com/tabEdit/gIcons/music_2x8th-o16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/newspaper-o16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/nosign-b16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/one_number-g16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/padlock-b16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/paper_pencil-y16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/pencil-o16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/people-y16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/phone-lb16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/photos-r16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/pizza-o16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/plane-b16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/play-b16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/pointer-b16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/profiles-o16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/promoted_video-r16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/question-o16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/rss-o16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/ruler-y16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/screen_callers-g16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/screwdriver_wrench-16.gif"
			, "http://www.chomperstomp.com/tabEdit/gIcons/search-b16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/star-16.gif"
			, "http://www.chomperstomp.com/tabEdit/gIcons/star_video-r16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/target-16.gif"
			, "http://www.chomperstomp.com/tabEdit/gIcons/target-b16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/toolbox-r16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/traffic_light-lb16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/transcription-p16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/webinar-br16.png"
			, "http://www.chomperstomp.com/tabEdit/gIcons/wrench-lb16.png"
		]*/
		, "google.com":[
			  "http://img9.imageshack.us/img9/7726/chromefavicon.png"
			, "/favicons/gIcons/alert-o16.png"
			, "/favicons/gIcons/api-r16.png"
			, "/favicons/gIcons/articles-g16.png"
			, "/favicons/gIcons/assorted_ads-y16.png"
			, "/favicons/gIcons/babyblock-b16.png"
			, "/favicons/gIcons/books-g16.png"
			, "/favicons/gIcons/bullet_1-b16.png"
			, "/favicons/gIcons/bullet_2-b16.png"
			, "/favicons/gIcons/bullet_3-b16.png"
			, "/favicons/gIcons/bullet_4-b16.png"
			, "/favicons/gIcons/bullet_5-b16.png"
			, "/favicons/gIcons/bullet_6-b16.png"
			, "/favicons/gIcons/bullet_7-b16.png"
			, "/favicons/gIcons/bullet_8-b16.png"
			, "/favicons/gIcons/bullet_9-b16.png"
			, "/favicons/gIcons/bullet_10-b16.png"
			, "/favicons/gIcons/business_tower-p16.png"
			, "/favicons/gIcons/chart-o16.png"
			, "/favicons/gIcons/chat-b16.png"
			, "/favicons/gIcons/checkmark-r16.png"
			, "/favicons/gIcons/clapper-b16.png"
			, "/favicons/gIcons/clock-y16.png"
			, "/favicons/gIcons/controlpanel-p16.png"
			, "/favicons/gIcons/copyright-b16.png"
			, "/favicons/gIcons/coupon_tag-r16.png"
			, "/favicons/gIcons/crate-br16.png"
			, "/favicons/gIcons/directions_api-16.png"
			, "/favicons/gIcons/epicenter-r16.png"
			, "/favicons/gIcons/filedownload-y16.png"
			, "/favicons/gIcons/filing_cabinet_search-g16.png"
			, "/favicons/gIcons/forward_voicemail-b16.png"
			, "/favicons/gIcons/geocoding_api-16.png"
			, "/favicons/gIcons/gift-o16.png"
			, "/favicons/gIcons/globe-b16.png"
			, "/favicons/gIcons/heart-r16.png"
			, "/favicons/gIcons/help_forum-o16.png"
			, "/favicons/gIcons/house-r16.png"
			, "/favicons/gIcons/house_ad-b16.png"
			, "/favicons/gIcons/info-g16.png"
			, "/favicons/gIcons/interactive_media_ads-16.png"
			, "/favicons/gIcons/key-y16.png"
			, "/favicons/gIcons/laptop-b16.png"
			, "/favicons/gIcons/lightbulb-y16.png"
			, "/favicons/gIcons/localbusiness-y16.png"
			, "/favicons/gIcons/mail-lb16.png"
			, "/favicons/gIcons/mobile_phone-16.gif"
			, "/favicons/gIcons/money-16.gif"
			, "/favicons/gIcons/music_2x8th-o16.png"
			, "/favicons/gIcons/newspaper-o16.png"
			, "/favicons/gIcons/nosign-b16.png"
			, "/favicons/gIcons/one_number-g16.png"
			, "/favicons/gIcons/padlock-b16.png"
			, "/favicons/gIcons/paper_pencil-y16.png"
			, "/favicons/gIcons/pencil-o16.png"
			, "/favicons/gIcons/people-y16.png"
			, "/favicons/gIcons/phone-lb16.png"
			, "/favicons/gIcons/photos-r16.png"
			, "/favicons/gIcons/pizza-o16.png"
			, "/favicons/gIcons/plane-b16.png"
			, "/favicons/gIcons/play-b16.png"
			, "/favicons/gIcons/pointer-b16.png"
			, "/favicons/gIcons/profiles-o16.png"
			, "/favicons/gIcons/promoted_video-r16.png"
			, "/favicons/gIcons/question-o16.png"
			, "/favicons/gIcons/rss-o16.png"
			, "/favicons/gIcons/ruler-y16.png"
			, "/favicons/gIcons/screen_callers-g16.png"
			, "/favicons/gIcons/screwdriver_wrench-16.gif"
			, "/favicons/gIcons/search-b16.png"
			, "/favicons/gIcons/star-16.gif"
			, "/favicons/gIcons/star_video-r16.png"
			, "/favicons/gIcons/target-16.gif"
			, "/favicons/gIcons/target-b16.png"
			, "/favicons/gIcons/toolbox-r16.png"
			, "/favicons/gIcons/traffic_light-lb16.png"
			, "/favicons/gIcons/transcription-p16.png"
			, "/favicons/gIcons/webinar-br16.png"
			, "/favicons/gIcons/wrench-lb16.png"
		]
	}
	, favicons: []
	, currentFaviconId: null
	, currentTitleText: null
	, init: function(){
		DB.getFavicons();
		DB.getPreferences();
	}
	, prePopulate: function(){
		if(TABDISPLAY.favicons.length < 1){
			document.getElementById("favicons").innerHTML = '<p style="text-align:center"><img src="/favicons/ajax-loader.gif" /><br />loading...</p>';

			for(var faviconCategory in TABDISPLAY.faviconsDefault){
				for(var favicon = 0, fcLength = TABDISPLAY.faviconsDefault[faviconCategory].length; favicon < fcLength; favicon++){
					DB.addFavicon(TABDISPLAY.faviconsDefault[faviconCategory][favicon], faviconCategory);
				}
			}

			DB.getFavicons();
		}
	}
	, setTitle: function(){
		var str;

		str = document.getElementById("newTitle").value;

		chrome.tabs.executeScript(null, {code:'document.title = "' + str + '";'});

		this.currentTitleText = str;
		DB.savePreferences(this.currentTitleText, this.currentFaviconId);
	}
	, changeFavicon: function(favNumber){
		console.log('cfi: ' + this.currentFaviconId);
		if(this.currentFaviconId != undefined && this.currentFaviconId != null){
			document.getElementById('icon' + this.currentFaviconId).className = document.getElementById('icon' + this.currentFaviconId).className.replace(/\bcurrent\b/,'');	
		}
	
		document.getElementById('icon' + favNumber).className += " current";
		

		chrome.tabs.executeScript(null, {file:'favicon.js'});
		chrome.tabs.executeScript(null, {code:'favicon.change("' + TABDISPLAY.favicons[favNumber]["url"] + '");'});

		this.currentFaviconId = favNumber;
		DB.savePreferences(this.currentTitleText, this.currentFaviconId);
		return false;
	}
	, makeFaviconLinks: function(){
		var div, link, html;

		div = document.getElementById("favicons");

		html = {"categories":{}, "combined":""};
		for(var icon = 0, icons = this.favicons.length; icon < icons; icon++){
			var category = this.favicons[icon]["category"];

			if(html.categories[category] == undefined){
				html.categories[category] = [""];
			}

			html.categories[category].push('<a href="#" '
				, 'onclick="TABDISPLAY.changeFavicon('
				, icon
				, ');">'
				, '<img src="'
				, this.favicons[icon]["url"]
				, '" '
				, 'id="icon'
				, icon
				, '" '
				, 'width="16px" />'
				, '</a>'
			);
		}

		for(category in html.categories){
			html.combined += '<p><a href="http://' + category + '" onclick="gotoLink();">' + category + '</a>:<br />' + html.categories[category].join('') + "</p>";
		}

		div.innerHTML = html.combined;
	}
	, addFavicon: function(){
		var favicon;

		favicon = document.getElementById("newFaviconURL").value;

		DB.addFavicon(favicon, "custom");
		this.init();
	}	
	, restoreDefaults: function(){
		DB.db.transaction(function(tx){
			tx.executeSql("DELETE FROM favicons WHERE 1 = 1", []);
		});

		TABDISPLAY.favicons = [];

		DB.getFavicons();
	}
}
